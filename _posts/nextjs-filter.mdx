---
title: 'Next.js App Routerì—ì„œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ í†µí•œ ìƒíƒœ ë³€ê²½ì‹œ ì£¼ì˜í•  ì '
date: '2025-05-16'
description: 'Next.js App Routerì—ì„œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ í†µí•œ ìƒíƒœ ë³€ê²½ ì‹œ UIê°€ ë©ˆì¶˜ ë“¯ ë³´ì´ëŠ” ì´ìœ ì™€ Suspenseì˜ ë¯¸ë™ì‘ ì›ì¸ì— ëŒ€í•´ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.'
---

Next.jsì˜ App Routerì—ì„œ SSR(Server Side Rendering) ê¸°ë°˜ìœ¼ë¡œ í˜ì´ì§€ë¥¼ êµ¬ì„±í•˜ë‹¤ ë³´ë©´,
**ê²€ìƒ‰ì–´, í•„í„°, í˜ì´ì§€ ë²ˆí˜¸ ë“± ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ê¸°ë°˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ íŒ¨ì¹­**í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ìì£¼ ë°œìƒí•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ `?keyword=nextjs&page=2` ê°™ì€ URLì„ í†µí•´ ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ ë‹¤ì‹œ ê°€ì ¸ì˜¤ê³ , ì´ì— ë”°ë¼ UIë¥¼ ì—…ë°ì´íŠ¸í•˜ê²Œ ë©ë‹ˆë‹¤.

í•˜ì§€ë§Œ ì´ ê³¼ì •ì—ì„œ **ì¿¼ë¦¬ìŠ¤íŠ¸ë§ë§Œ ë³€ê²½í–ˆì„ ë¿ì¸ë°ë„ UIê°€ ë©ˆì¶˜ ë“¯ ë³´ì´ëŠ” í˜„ìƒ**ì´ ìì£¼ ë°œìƒí•©ë‹ˆë‹¤. ì´ ê¸€ì—ì„œëŠ” ì´ëŸ¬í•œ í˜„ìƒì´ ë°œìƒí•˜ëŠ” ì´ìœ ì™€, Next.js App Router í™˜ê²½ì—ì„œ **ì–´ë–»ê²Œ ë” ë‚˜ì€ ì‚¬ìš©ì ê²½í—˜ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ”ì§€**ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.


## í˜„ìƒ

ê²€ìƒ‰ì–´ë‚˜ ì¹´í…Œê³ ë¦¬, í˜ì´ì§€ ë²ˆí˜¸ ë“±ì„ ë°”ê¿”ê°€ë©° ì›í•˜ëŠ” ì¡°ê±´ì— ë§ëŠ” ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ëŠ” ê³¼ì •ì—ì„œ, ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ë³€ê²½í•˜ëŠ” ì¼ì´ ìì£¼ ìˆì—ˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ `?keyword=nextjs&page=2`ì²˜ëŸ¼ URLì„ ìˆ˜ì •í•´ í•„í„°ë§ëœ ê²°ê³¼ë¥¼ í™•ì¸í•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.

ê·¸ëŸ°ë° ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ë°”ê¾¼ ì´í›„, ë°ì´í„°ë¥¼ ìƒˆë¡œ íŒ¨ì¹­í•˜ëŠ” ë™ì•ˆ `loading.tsx`ë‚˜ `Suspense`ì˜ fallback UIê°€ í‘œì‹œë˜ì§€ ì•Šê³ , í™”ë©´ì´ ê°‘ìê¸° ë°”ë€ŒëŠ” ë“¯í•œ í˜„ìƒì´ ë‚˜íƒ€ë‚¬ìŠµë‹ˆë‹¤.

ë˜í•œ, í•„í„° ë²„íŠ¼ì´ë‚˜ í˜ì´ì§€ë„¤ì´ì…˜ UIë„ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì´ ì‹¤ì œ ë°˜ì˜ëœ í›„ì—ì•¼ ëŠ¦ê²Œ ì—…ë°ì´íŠ¸ë˜ì–´, í´ë¦­í–ˆëŠ”ë° ì•„ë¬´ëŸ° ë°˜ì‘ì´ ì—†ëŠ” ê²ƒì²˜ëŸ¼ ëŠê»´ì§€ëŠ” ê²½í—˜ì„ í•˜ê²Œ ëìŠµë‹ˆë‹¤.

## ì›ì¸

Next.js App Routerì—ì„œëŠ” router.push()ë¡œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ë§Œ ë³€ê²½í•˜ëŠ” ê²½ìš°, pathnameì´ ë™ì¼í•˜ë‹¤ë©´ ê¸°ì¡´ì˜ layoutê³¼ page ì»´í¬ë„ŒíŠ¸ë¥¼ ì–¸ë§ˆìš´íŠ¸í•˜ì§€ ì•Šê³  ìœ ì§€í•œ ì±„ React ë‚´ë¶€ì—ì„œ ì¼ë¶€ë§Œ ë‹¤ì‹œ ë Œë”ë§í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ loading.tsxëŠ” íŠ¸ë¦¬ê±°ë˜ì§€ ì•Šìœ¼ë©°, Suspense fallbackë„ ì‹¤í–‰ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

ì¦‰, ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë°›ì•„ì˜¤ê³  ìˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³ , ì‚¬ìš©ìëŠ” ê·¸ ì‚¬ì´ì˜ ë¡œë”© ê³¼ì •ì„ ì „í˜€ ì¸ì§€í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ UIëŠ” ë¶„ëª…íˆ ì—…ë°ì´íŠ¸ë˜ê³  ìˆì§€ë§Œ, ë¡œë”© ì¤‘ì´ë¼ëŠ” ì‹œê°ì  íŒíŠ¸ê°€ ì—†ê¸° ë•Œë¬¸ì— í™”ë©´ì´ ê°‘ìê¸° ë°”ë€ŒëŠ” ë“¯í•œ ë¶€ìì—°ìŠ¤ëŸ¬ìš´ UXê°€ ë°œìƒí•©ë‹ˆë‹¤.

ë˜í•œ, ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ê¸°ë°˜ìœ¼ë¡œ ë Œë”ë§ë˜ëŠ” í˜ì´ì§€ ë²ˆí˜¸ë‚˜ í™œì„± í•„í„° ë“±ì˜ ìƒíƒœëŠ” router.push() ì§í›„ì—ëŠ” ë°˜ì˜ë˜ì§€ ì•Šê³ , ì„œë²„ ì»´í¬ë„ŒíŠ¸ê°€ ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë°›ì•„ ë‹¤ì‹œ ë Œë”ë§ì„ ë§ˆì¹œ ë’¤ì—ì•¼ í´ë¼ì´ì–¸íŠ¸ì— ë°˜ì˜ë©ë‹ˆë‹¤. (ì•„ë˜ í…ŒìŠ¤íŠ¸ ì˜ìƒ ì°¸ê³ )

ê²°ê³¼ì ìœ¼ë¡œ ë²„íŠ¼ì„ í´ë¦­í•´ë„ ì¦‰ê°ì ì¸ ë°˜ì‘ ì—†ì´ ì§€ì—°ëœ í™”ë©´ ë³€ê²½ì´ ì¼ì–´ë‚˜ê¸° ë•Œë¬¸ì—, "í´ë¦­í–ˆëŠ”ë° ì•„ë¬´ ì¼ë„ ì•ˆ ì¼ì–´ë‚˜ëŠ” ê²ƒ ê°™ì€" ì¸ìƒì„ ì£¼ëŠ” ë¬¸ì œê°€ ë°œìƒí•©ë‹ˆë‹¤.

ë‹¤ìŒ ì˜ìƒì€, ë°ì´í„°íŒ¨ì¹­ì„ ê°•ì œë¡œ 4ì´ˆ ì§€ì—°ì‹œí‚¨í›„ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ë³€ê²½í–ˆì„ ë•Œì˜ ëª¨ìŠµì…ë‹ˆë‹¤. (ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì´ë ‡ê²Œ ëŠë¦¬ê²Œ ë™ì‘í•˜ì§€ ì•Šì§€ë§Œ, ë¬¸ì œë¥¼ ì´í•´í•˜ê¸° ì‰½ê²Œ í•˜ê¸° ìœ„í•´ ì˜ë„ì ìœ¼ë¡œ ì§€ì—°ì‹œì¼°ìŠµë‹ˆë‹¤.)

![ì¿¼ë¦¬ìŠ¤íŠ¸ë§ë³€ê²½_ì§€ì—°UI](/posts/next-filter/img-1.webp)


## í•´ê²°ë°©ë²•

1. `Suspense`ì˜ ë¦¬ë§ˆìš´íŠ¸ë¥¼ ìœ ë„í•˜ê³  ì‹¶ë‹¤ë©´, `key`ë¥¼ ê°•ì œë¡œ ë¶€ì—¬í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê°€ëŠ¥í•©ë‹ˆë‹¤.
2. ì‹¤ì§ˆì ì¸ ëŒ€ì‘ ì „ëµ
- ì„œë²„ ë°ì´í„°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë¡œë”© UIë¥¼ ë³´ì—¬ì£¼ê³  ì‹¶ë‹¤ë©´, `useTransition()`ì˜ `isPending` ìƒíƒœë¥¼ í™œìš©í•©ë‹ˆë‹¤.
- ì¿¼ë¦¬ìŠ¤íŠ¸ë§ ê¸°ë°˜ìœ¼ë¡œ ì¦‰ê° ë°˜ì˜ë˜ì–´ì•¼ í•˜ëŠ” UI ìƒíƒœëŠ” `useOptimistic()`ì„ í™œìš©í•´ ë‚™ê´€ì ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

## 1ì°¨ë¡œ í•´ê²°í•œ ì½”ë“œ (í˜ì´ì§€ë„¤ì´ì…˜)
ê¸°ì¡´ì—ëŠ” ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì„ ê¸°ë°˜ìœ¼ë¡œ í™œì„± í˜ì´ì§€ë¥¼ í‘œì‹œí–ˆê¸° ë•Œë¬¸ì—, í˜ì´ì§€ë„¤ì´ì…˜ ì‹œ ë°ì´í„°ê°€ ëª¨ë‘ ë¡œë“œëœ ì´í›„ì—ì•¼ UIê°€ ë°˜ì˜ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ì œëŠ” ë‚™ê´€ì  ìƒíƒœë¥¼ í™œìš©í•´í´ë¦­ ì¦‰ì‹œ í™œì„± í˜ì´ì§€ê°€ í‘œì‹œë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.

```tsx
const [optimisticPage, setOptimisticPage] = useOptimistic(
  currentPage,
  (_, next: number) => next,
);

function handleClick(page: number) {
  const params = new URLSearchParams(searchParams);
  params.set("page", String(page));

  startTransition(() => {
    setOptimisticPage(page); // ğŸ‘ˆ ë‚™ê´€ì  ì—…ë°ì´íŠ¸
    router.push(`${pathname}?${params}`);
  });
}

{/* UIì—ì„œëŠ” optimisticPage ì‚¬ìš© */}
{[...Array(totalPage)].map((_, i) => {
  const page = i + 1;
  return (
    <PaginationItem key={page}>
      <PaginationLink
        isActive={page === optimisticPage}
        onClick={() => handleClick(page)}
      >
        {page}
      </PaginationLink>
    </PaginationItem>
  );
})}

```

## ë§Œì•½ì— ë³µí•©ì ì¸ ì—¬ëŸ¬ íŒŒë¼ë¯¸í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ”? - ê°ê°ì˜ í•„í„°ë§ ìƒíƒœë¥¼ í•˜ë‚˜ì˜ íŠ¸ëœì§€ì…˜ìœ¼ë¡œ ë¬¶ì–´ì•¼ í•˜ëŠ” ì´ìœ 
ì—¬ëŸ¬ ê°œì˜ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°(ì˜ˆ: keyword, category, page)ê°€ í•¨ê»˜ ë³€ê²½ë˜ëŠ” ê²½ìš°ì—ëŠ” ê° ìƒíƒœë¥¼ ë”°ë¡œ ì²˜ë¦¬í•˜ë©´ ì¤‘ê°„ì— isPendingì´ ëŠê¸°ê±°ë‚˜ UIê°€ ê¹œë¹¡ì´ëŠ” í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•˜ë‚˜ì˜ useTransition ì•ˆì—ì„œ ë¬¶ì–´ ì²˜ë¦¬í•˜ë©´, ëª¨ë“  ìƒíƒœ ë³€í™”ê°€ í•˜ë‚˜ì˜ íë¦„ìœ¼ë¡œ ì—°ê²°ë˜ì–´ ì¼ê´€ëœ ë¡œë”© ìƒíƒœì™€ ë¶€ë“œëŸ¬ìš´ ì‚¬ìš©ì ê²½í—˜ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![ë³µí•©ì ì¸í•„í„°ë§](/posts/next-filter/img-2.svg)

- ê²€ìƒ‰, í˜ì´ì§€ë„¤ì´ì…˜, í•„í„°ë§ì´ ë™ì‹œì— ë™ì‘í•  ìˆ˜ ìˆëŠ” ìƒí™©
- ì´ ì¤‘ í•˜ë‚˜ë§Œ ë°”ë€ŒëŠ” ê²ƒì´ ì•„ë‹ˆë¼, **ê²€ìƒ‰ â†’ í•„í„° â†’ í˜ì´ì§€ ì´ë™**ì´ **ì—°ì‡„ì ìœ¼ë¡œ ì¼ì–´ë‚  ìˆ˜ ìˆìŒ**
- ì´ê±¸ **í•˜ë‚˜ì˜ íŠ¸ëœì§€ì…˜ìœ¼ë¡œ ë¬¶ì§€ ì•Šìœ¼ë©´** ì•„ë˜ ë¬¸ì œê°€ ìƒê¹€:
    - `isPending`ì´ ì¤‘ê°„ì— ëŠê¹€
    - ë¡œë”© UIê°€ flicker í˜„ìƒì„ ì¼ìœ¼í‚´
    - ë‚™ê´€ì  ìƒíƒœì™€ ì‹¤ì œ ë°ì´í„° ê°„ì˜ ë¶ˆì¼ì¹˜ íƒ€ì´ë°ì´ ê¸¸ì–´ì§


## ë³µí•©ì ì¸ ìƒí™©ì„ í•´ê²°í•˜ê¸° ìœ„í•œ ì„ íƒí•œ ë°©ë²•

ì—¬ëŸ¬ ê°œì˜ í•„í„° ì¡°ê±´(ê²€ìƒ‰ì–´, ì¹´í…Œê³ ë¦¬, í˜ì´ì§€ ë²ˆí˜¸ ë“±)ì´ ë™ì‹œì— ë°”ë€” ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ì´ë“¤ì˜ transition ìƒíƒœë¥¼ ì „ì—­ì—ì„œ í†µí•©ì ìœ¼ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ Context APIë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, ê²€ìƒ‰ì°½ì´ë‚˜ í˜ì´ì§€ë„¤ì´ì…˜ ë²„íŠ¼ì²˜ëŸ¼ ë‹¨ì¼ ë™ì‘ë§Œ ì²˜ë¦¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ë‚´ë¶€ì ìœ¼ë¡œë„ ë³„ë„ë¡œ useTransitionì„ ì‚¬ìš©í•´ ìì²´ì ì¸ ë¡œë”© ìƒíƒœë¥¼ ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ê²€ìƒ‰ì°½ì˜ ê²½ìš°, ì‚¬ìš©ìê°€ ì—”í„°ë¥¼ ëˆ„ë¥´ë©´ ê²€ìƒ‰ì°½ ìì²´ì˜ ë¡œë”© UIê°€ ì¦‰ì‹œ ë°˜ì‘í•˜ê³ , ë™ì‹œì— ì „ì—­ transitionì´ ì‹¤í–‰ë˜ì–´ ë¦¬ìŠ¤íŠ¸ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ê²Œ ë©ë‹ˆë‹¤.

ì´ë ‡ê²Œ í•˜ë©´, ê²€ìƒ‰ì°½ì€ ë¹ ë¥´ê²Œ ë°˜ì‘í•˜ê³ , ë¦¬ìŠ¤íŠ¸ëŠ” ìì—°ìŠ¤ëŸ½ê²Œ ìŠ¤ì¼ˆë ˆí†¤ìœ¼ë¡œ ì „í™˜ë˜ì–´ ì—¬ëŸ¬ íŒŒë¼ë¯¸í„°ê°€ í•¨ê»˜ ë™ì‘í•˜ë”ë¼ë„ ë¶€ìì—°ìŠ¤ëŸ½ì§€ ì•Šì€ UXë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ìµœì¢…ì½”ë“œ

### FilterContext
```tsx
"use client";

import { createContext, useContext, useOptimistic, useTransition } from "react";
import { useRouter, useSearchParams } from "next/navigation";

const FilterContext = createContext(/* ... */);

export function useFilters() {
  return useContext(FilterContext)!;
}

export default function FilterProvider({ basePath = '/' , children }) {
  const router = useRouter();
  const searchParams = useSearchParams();
  
  const initialFilters = Object.fromEntries(searchParams.entries());
  const [isPending, startTransition] = useTransition();
  const [optimisticFilters, setOptimisticFilters] = useOptimistic(
    initialFilters,
    (prev, next) => ({ ...prev, ...next }),
  );

  function updateFilters(nextFilters) {
    const newState = {
      ...optimisticFilters,
      ...nextFilters,
    };
    const newSearchParams = new URLSearchParams(newState);

    Object.entries(newState).forEach(([key, value]) => {
		  if (value !== undefined) {
		    newSearchParams.set(key, String(value));
		  }
		});

    startTransition(() => {
      setOptimisticFilters(updates || {});
      router.push(`${basePath}?${newSearchParams}`);
    });
  }

  return (
    <FilterContext.Provider
      value={{ filters: optimisticFilters, isPending, updateFilters }}
    >
      {children}
    </FilterContext.Provider>
  );
}
```

### FilterContextì˜ isPending ì‚¬ìš© (ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸)
```tsx
export default function RoadmapList({ data, keyword }: RoadmapListProps) {
  const { isPending } = useFilters();

	// ì¹´í…Œê³ ë¦¬, í˜ì´ì§€ë„¤ì´ì…˜, ê²€ìƒ‰ì´ ë³µí•©ì ìœ¼ë¡œ ë°˜ì˜ëœ isPending ìƒíƒœ
  if (isPending) {
    return (
      <GridList
        skeleton
        items={[...Array(6)]}
        renderItem={() => <RoadmapCardSkeleton />}
      />
    );
  }

  if (!data || data.length === 0) {
    return (
      ...
    );
  }

  return (
    <GridList
      items={data}
      renderItem={(item) => (
        <Link href={`/roadmap/${item.externalId}`}>
          <RoadmapCard roadmap={item} />
        </Link>
      )}
    />
  );
}
```

### ê°œë³„ì ì¸ transitionì´ í•„ìš”í•  ê²½ìš° (ê²€ìƒ‰ ì»´í¬ë„ŒíŠ¸)
```tsx
"use client";

export default function Search({ placeholder }: SearchProps) {
  const [isPending, startTransition] = useTransition();
  const { filters, updateFilters } = useFilters();
  const [value, setValue] = useState(filters?.keyword || "");

  const handleTagKeyDown = (e: KeyboardEvent<HTMLInputElement>) => {
    if (e.key !== "Enter") return;

    e.preventDefault();

    const keyword = (e.target as HTMLInputElement).value;
    const trimmedKeyword = keyword.trim();

    startTransition(() => {
      updateFilters({ keyword: trimmedKeyword });
    });
  };

  useEffect(() => {
    setValue(filters?.keyword || "");
  }, [filters?.keyword]);

  return (
    <div
      className={cn(
        "...",
        isPending && "opacity-80", // ê°œë³„ì ì¸ pending ìƒíƒœ UI
      )}
    >
      <input
        type="text"
        placeholder={placeholder || "ê²€ìƒ‰"}
        value={value}
        onChange={(e) => setValue(e.target.value)}
        onKeyDown={handleTagKeyDown}
      />
      {/* ê°œë³„ì ì¸ pending ìƒíƒœ UI */}
      {isPending && <Spinner className="h-4 w-4" />}
    </div>
  );
}
```

## í•´ê²°ëœ ëª¨ìŠµ
ì´ì œëŠ” ë°ì´í„° íŒ¨ì¹­ì´ ì§€ì—°ë˜ë”ë¼ë„, ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ëŠ” ë‚™ê´€ì  ì—…ë°ì´íŠ¸ë¥¼ í†µí•´ ì¦‰ì‹œ UIì— ë°˜ì˜ë˜ë©°, ë” ìì—°ìŠ¤ëŸ½ê³  ë¹ ë¥´ê²Œ ë°˜ì‘í•˜ëŠ” UXë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![ì¿¼ë¦¬ìŠ¤íŠ¸ë§ë³€ê²½_í•´ê²°UI](/posts/next-filter/img-3.webp)
